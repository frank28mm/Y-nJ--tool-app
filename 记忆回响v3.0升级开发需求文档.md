# è®°å¿†å›å“v3.0å‡çº§å¼€å‘éœ€æ±‚æ–‡æ¡£

**é¡¹ç›®ä»£å·**ï¼šè®°å¿†å›å“ v3.0  
**ç‰ˆæœ¬å·**ï¼š3.0.0  
**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0  
**åˆ›å»ºæ—¥æœŸ**ï¼š2025å¹´8æœˆ31æ—¥  
**æ–‡æ¡£çŠ¶æ€**ï¼šæ­£å¼å‘å¸ƒ  

---

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [å‡çº§ç›®æ ‡ä¸æˆ˜ç•¥](#å‡çº§ç›®æ ‡ä¸æˆ˜ç•¥)
3. [æ¶æ„å‡çº§è¯¦è¿°](#æ¶æ„å‡çº§è¯¦è¿°)
4. [åŠŸèƒ½éœ€æ±‚è§„æ ¼](#åŠŸèƒ½éœ€æ±‚è§„æ ¼)
5. [æŠ€æœ¯å®ç°æ–¹æ¡ˆ](#æŠ€æœ¯å®ç°æ–¹æ¡ˆ)
6. [æ•°æ®æ¨¡å‹è®¾è®¡](#æ•°æ®æ¨¡å‹è®¾è®¡)
7. [æ¥å£è§„èŒƒ](#æ¥å£è§„èŒƒ)
8. [ç”¨æˆ·ç•Œé¢é‡æ„](#ç”¨æˆ·ç•Œé¢é‡æ„)
9. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
10. [éƒ¨ç½²ä¸è¿ç§»](#éƒ¨ç½²ä¸è¿ç§»)
11. [é£é™©è¯„ä¼°](#é£é™©è¯„ä¼°)
12. [å¼€å‘è®¡åˆ’](#å¼€å‘è®¡åˆ’)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

è®°å¿†å›å“é¡¹ç›®ä»v2.0çš„ä¸“ç”¨å‹å¤©æ–‡é¦†è®²è§£å‘˜åŸ¹è®­å·¥å…·ï¼Œå‡çº§ä¸ºv3.0é€šç”¨å‹AIèµ‹èƒ½ä¸ªæ€§åŒ–å­¦ä¹ å¹³å°ã€‚æœ¬æ¬¡å‡çº§å°†å®ç°ä»"äº‘ä¸ºä¸­å¿ƒ"åˆ°"æœ¬åœ°ä¼˜å…ˆ"çš„æ ¹æœ¬æ€§æ¶æ„è½¬å˜ã€‚

### 1.2 æ ¸å¿ƒè½¬å˜

| ç»´åº¦ | v2.0 (å½“å‰) | v3.0 (ç›®æ ‡) |
|------|-------------|-------------|
| **äº§å“å®šä½** | å¤©æ–‡é¦†ä¸“ç”¨å·¥å…· | é€šç”¨å­¦ä¹ å¹³å° |
| **å†…å®¹æ¥æº** | é¢„è®¾å›ºå®šå†…å®¹ | ç”¨æˆ·ä¸Šä¼ ä»»æ„ææ–™ |
| **æ•°æ®å­˜å‚¨** | äº‘ç«¯ä¸ºä¸» | æœ¬åœ°ä¼˜å…ˆï¼Œäº‘ç«¯åŒæ­¥ |
| **AIè§’è‰²** | å¤©æ–‡å†…å®¹ä¸“å®¶ | é€šç”¨å­¦ä¹ åŠ©æ‰‹ |
| **ç”¨æˆ·ç¾¤ä½“** | åšç‰©é¦†è®²è§£å‘˜ | ä»»ä½•å­¦ä¹ è€… |

---

## 2. å‡çº§ç›®æ ‡ä¸æˆ˜ç•¥

### 2.1 æˆ˜ç•¥ç›®æ ‡

#### 2.1.1 æŠ€æœ¯ç›®æ ‡
- âœ… å®ç°100%ç¦»çº¿å¯ç”¨æ€§
- âœ… å°†å“åº”æ—¶é—´ä»500msé™è‡³50msä»¥ä¸‹
- âœ… æ”¯æŒä»»æ„æ ¼å¼æ–‡æœ¬ææ–™å¤„ç†
- âœ… å®ç°è·¨è®¾å¤‡æ— ç¼åŒæ­¥

#### 2.1.2 äº§å“ç›®æ ‡
- âœ… é™ä½ç”¨æˆ·ä½¿ç”¨é—¨æ§›è‡³"é›¶é…ç½®"
- âœ… å¢å¼ºæ•°æ®éšç§ä¿æŠ¤
- âœ… æ‰©å¤§ç›®æ ‡ç”¨æˆ·ç¾¤ä½“10å€ä»¥ä¸Š
- âœ… æå‡å­¦ä¹ ä½“éªŒä¸ªæ€§åŒ–ç¨‹åº¦

### 2.2 æ ¸å¿ƒåŸåˆ™

1. **æœ¬åœ°ä¼˜å…ˆ (Local-First)**
   - æ‰€æœ‰æ ¸å¿ƒæ•°æ®å­˜å‚¨åœ¨ç”¨æˆ·è®¾å¤‡
   - å®Œå…¨ç¦»çº¿åŠŸèƒ½æ”¯æŒ
   - ç”¨æˆ·æ‹¥æœ‰å®Œæ•´æ•°æ®æ§åˆ¶æƒ

2. **AIèµ‹èƒ½ (AI-Powered)**
   - æ™ºèƒ½å†…å®¹åˆ†æä¸ç»“æ„åŒ–
   - ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ç”Ÿæˆ
   - è‡ªé€‚åº”éš¾åº¦è°ƒæ•´

3. **éšç§ä¿æŠ¤ (Privacy-First)**
   - åŸæ–‡å†…å®¹é»˜è®¤ä¸ä¸Šä¼ äº‘ç«¯
   - ç«¯åˆ°ç«¯åŠ å¯†åŒæ­¥
   - é€æ˜çš„æ•°æ®ä½¿ç”¨æ”¿ç­–

4. **æ— ç¼ä½“éªŒ (Seamless)**
   - ä¸€é”®ä¸Šä¼ ï¼Œè‡ªåŠ¨å¤„ç†
   - å³æ—¶å“åº”ï¼Œæ— æ„ŸçŸ¥åŒæ­¥
   - è·¨è®¾å¤‡çŠ¶æ€æ¢å¤

---

## 3. æ¶æ„å‡çº§è¯¦è¿°

### 3.1 æ¶æ„å¯¹æ¯”

#### 3.1.1 v2.0æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (Vue)    â”‚â”€â”€â”€â–¶â”‚  Supabaseåç«¯   â”‚â”€â”€â”€â–¶â”‚   SiliconFlow   â”‚
â”‚                 â”‚    â”‚   PostgreSQL    â”‚    â”‚     AI API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 v3.0æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   å‰ç«¯ (Vue3)   â”‚    â”‚   IndexedDB     â”‚                 â”‚
â”‚  â”‚                 â”‚â—„â”€â”€â”€â”¤   (Dexie.js)    â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                    â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  æœ¬åœ°å¤„ç†å¼•æ“   â”‚    â”‚  åŒæ­¥æœåŠ¡   â”‚                      â”‚
â”‚  â”‚  (Web Workers)  â”‚    â”‚  (Background)â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚ HTTPS
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Supabase Edge         â”‚
                    â”‚   Functions +           â”‚
                    â”‚   Gemini API            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 æ•°æ®æµè½¬è®¾è®¡

#### 3.2.1 å†…å®¹ä¸Šä¼ ä¸å¤„ç†æµç¨‹
```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant IndexedDB
    participant EdgeFunction
    participant Gemini

    User->>Browser: é€‰æ‹©æ–‡ä»¶
    Browser->>Browser: è®¡ç®—SHA-256å“ˆå¸Œ
    Browser->>IndexedDB: æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
    alt æ–°å†…å®¹
        Browser->>EdgeFunction: å‘é€æ–‡æœ¬å†…å®¹
        EdgeFunction->>Gemini: è°ƒç”¨AIå¤„ç†
        Gemini-->>EdgeFunction: è¿”å›ç»“æ„åŒ–æ•°æ®
        EdgeFunction-->>Browser: è¿”å›å¤„ç†ç»“æœ
        Browser->>IndexedDB: å­˜å‚¨æ–‡æ¡£å’Œæ®µè½
    end
    Browser-->>User: æ˜¾ç¤ºå¤„ç†å®Œæˆ
```

#### 3.2.2 å­¦ä¹ ä¸åŒæ­¥æµç¨‹
```mermaid
sequenceDiagram
    participant User
    participant Browser
    participant IndexedDB
    participant SyncService
    participant Supabase

    User->>Browser: å¼€å§‹å­¦ä¹ 
    Browser->>IndexedDB: è¯»å–æœ¬åœ°æ•°æ®
    Browser-->>User: æ˜¾ç¤ºå­¦ä¹ å†…å®¹
    
    loop å­¦ä¹ è¿‡ç¨‹
        User->>Browser: ç­”é¢˜ã€å¤ä¹ 
        Browser->>IndexedDB: è®°å½•è¿›åº¦
    end
    
    Browser->>SyncService: è§¦å‘åŒæ­¥
    SyncService->>IndexedDB: è·å–å˜æ›´æ•°æ®
    SyncService->>Supabase: ä¸Šä¼ è¿›åº¦æ•°æ®
    Supabase-->>SyncService: ç¡®è®¤åŒæ­¥
    SyncService->>IndexedDB: æ›´æ–°åŒæ­¥çŠ¶æ€
```

---

## 4. åŠŸèƒ½éœ€æ±‚è§„æ ¼

### 4.1 æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

#### 4.1.1 æ–‡æ¡£ç®¡ç†
- **æ–‡æ¡£ä¸Šä¼ **
  - æ”¯æŒæ ¼å¼ï¼šTXT, PDF, DOC, DOCX, MD
  - æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MB
  - æ‰¹é‡ä¸Šä¼ æ”¯æŒ
  - æ‹–æ‹½ä¸Šä¼ ç•Œé¢

- **æ–‡æ¡£å¤„ç†**
  - è‡ªåŠ¨å†…å®¹æå–
  - æ™ºèƒ½åˆ†æ®µç®—æ³•
  - å…³é”®è¯è‡ªåŠ¨æå–
  - éš¾åº¦ç­‰çº§è¯„ä¼°

- **æ–‡æ¡£åˆ—è¡¨**
  - æœ¬åœ°æ–‡æ¡£ç®¡ç†
  - æœç´¢ä¸ç­›é€‰
  - åˆ†ç±»æ ‡ç­¾ç³»ç»Ÿ
  - å­¦ä¹ è¿›åº¦å¯è§†åŒ–

#### 4.1.2 å­¦ä¹ æ¨¡å¼
- **å¡«ç©ºè®­ç»ƒ**
  - æ™ºèƒ½ç©ºç™½ç”Ÿæˆ
  - å®æ—¶ç­”æ¡ˆéªŒè¯
  - é”™é¢˜æ”¶é›†åŠŸèƒ½
  - è‡ªé€‚åº”éš¾åº¦è°ƒæ•´

- **å¤è¿°è®­ç»ƒ**
  - è¯­éŸ³è½¬æ–‡å­—
  - AIå†…å®¹è¯„ä¼°
  - æ”¹è¿›å»ºè®®ç”Ÿæˆ
  - è¯­éŸ³å›æ”¾å¯¹æ¯”

- **è‡ªç”±å¤ä¹ **
  - é—´éš”é‡å¤ç®—æ³•
  - ä¸ªæ€§åŒ–å¤ä¹ è®¡åˆ’
  - å­¦ä¹ æ•ˆæœç»Ÿè®¡
  - çŸ¥è¯†ç‚¹å›¾è°±

#### 4.1.3 åŒæ­¥ä¸å¤‡ä»½
- **è‡ªåŠ¨åŒæ­¥**
  - å®æ—¶è¿›åº¦åŒæ­¥
  - å¢é‡æ•°æ®æ›´æ–°
  - å†²çªè§£å†³æœºåˆ¶
  - åŒæ­¥çŠ¶æ€æŒ‡ç¤º

- **æ‰‹åŠ¨å¤‡ä»½**
  - ä¸€é”®å¯¼å‡ºæ•°æ®
  - è·¨è®¾å¤‡äºŒç»´ç åˆ†äº«
  - æ•°æ®æ¢å¤åŠŸèƒ½
  - ç‰ˆæœ¬å†å²ç®¡ç†

### 4.2 ç”¨æˆ·ç•Œé¢éœ€æ±‚

#### 4.2.1 å“åº”å¼è®¾è®¡
- **æ¡Œé¢ç«¯** (1440px+)
- **å¹³æ¿ç«¯** (768px-1439px)
- **æ‰‹æœºç«¯** (320px-767px)

#### 4.2.2 ä¸»é¢˜ç³»ç»Ÿ
- **æµ…è‰²ä¸»é¢˜** (é»˜è®¤)
- **æ·±è‰²ä¸»é¢˜** (å¯é€‰)
- **é«˜å¯¹æ¯”åº¦** (æ— éšœç¢æ”¯æŒ)

---

## 5. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 5.1 æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### 5.1.1 å‰ç«¯æŠ€æœ¯
```typescript
// ä¸»è¦ä¾èµ–
{
  "vue": "^3.4.0",
  "typescript": "^5.3.0",
  "vite": "^5.0.0",
  "dexie": "^3.2.4",
  "crypto-js": "^4.2.0",
  "@google/generative-ai": "^0.2.0",
  "lucide-vue-next": "^0.300.0",
  "vue-router": "^4.2.0",
  "pinia": "^2.1.0"
}
```

#### 5.1.2 åç«¯æŠ€æœ¯
```typescript
// Supabase Edge Functions
{
  "runtime": "deno",
  "dependencies": [
    "@google/generative-ai",
    "std/http",
    "std/crypto"
  ]
}
```

### 5.2 å…³é”®å®ç°ç»†èŠ‚

#### 5.2.1 å†…å®¹å“ˆå¸Œç®—æ³•
```typescript
async function calculateContentHash(content: string): Promise<string> {
  const encoder = new TextEncoder();
  const data = encoder.encode(content);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}
```

#### 5.2.2 æœ¬åœ°æ•°æ®åº“è®¾è®¡
```typescript
// Dexie.js æ•°æ®åº“å®šä¹‰
class LearningDatabase extends Dexie {
  documents!: Table<Document, string>;
  paragraphs!: Table<Paragraph, string>;
  userProgress!: Table<UserProgress, number>;
  syncStatus!: Table<SyncStatus, string>;

  constructor() {
    super('LearningDB');
    
    this.version(4).stores({
      documents: '&id, title, createdAt, updatedAt, fileSize, processingStatus',
      paragraphs: '&id, documentId, order, difficulty, keywords',
      userProgress: '++id, paragraphId, masteryLevel, lastPracticed, syncStatus',
      syncStatus: '&tableName, lastSyncTime, pendingChanges'
    });
  }
}
```

---

## 6. æ•°æ®æ¨¡å‹è®¾è®¡

### 6.1 æ ¸å¿ƒå®ä½“å…³ç³»

```mermaid
erDiagram
    DOCUMENT ||--o{ PARAGRAPH : contains
    PARAGRAPH ||--o{ USER_PROGRESS : tracks
    DOCUMENT ||--o{ DOCUMENT_VERSION : versions
    USER ||--o{ USER_PREFERENCE : has
    
    DOCUMENT {
        string id PK
        string title
        string contentHash
        int fileSize
        int wordCount
        datetime createdAt
        datetime updatedAt
        string processingStatus
    }
    
    PARAGRAPH {
        string id PK
        string documentId FK
        int order
        string title
        string content
        string summary
        string[] keywords
        json fillBlanks
        int difficulty
    }
    
    USER_PROGRESS {
        int id PK
        string paragraphId FK
        float masteryLevel
        int practiceCount
        datetime lastPracticed
        json mistakes
        bool syncStatus
    }
```

### 6.2 è¯¦ç»†æ•°æ®ç»“æ„

#### 6.2.1 Document æ–‡æ¡£è¡¨
```typescript
interface Document {
  id: string; // SHA-256 å†…å®¹å“ˆå¸Œ
  title: string;
  originalFileName: string;
  fileType: 'txt' | 'pdf' | 'doc' | 'docx' | 'md';
  fileSize: number; // å­—èŠ‚
  wordCount: number;
  
  content: string; // åŸå§‹æ–‡æœ¬å†…å®¹
  contentHash: string; // å†…å®¹å“ˆå¸Œ
  
  processingStatus: 'pending' | 'processing' | 'completed' | 'error';
  processingError?: string;
  
  aiModel: string; // å¤„ç†æ—¶ä½¿ç”¨çš„æ¨¡å‹
  aiVersion: string; // æ¨¡å‹ç‰ˆæœ¬
  
  createdAt: Date;
  updatedAt: Date;
  lastAccessedAt: Date;
  
  tags: string[];
  category?: string;
  difficulty: 1 | 2 | 3 | 4 | 5; // æ•´ä½“éš¾åº¦
  estimatedStudyTime: number; // åˆ†é’Ÿ
}
```

#### 6.2.2 Paragraph æ®µè½è¡¨
```typescript
interface Paragraph {
  id: string; // UUID v4
  documentId: string; // å…³è”æ–‡æ¡£ID
  order: number; // æ®µè½é¡ºåº
  
  title: string; // æ®µè½æ ‡é¢˜ (10-20å­—)
  content: string; // åŸå§‹å†…å®¹ (50-150å­—)
  summary: string; // æ ¸å¿ƒæ‘˜è¦ (30-50å­—)
  
  keywords: string[]; // å…³é”®è¯æ•°ç»„ (3-5ä¸ª)
  keyConcepts: { // å…³é”®æ¦‚å¿µè¯¦ç»†å®šä¹‰
    term: string;
    definition: string;
    importance: 1-5;
  }[];
  
  fillBlanks: {
    textWithPlaceholders: string; // å¸¦ç©ºç™½çš„æ–‡æœ¬
    answers: string[]; // æ­£ç¡®ç­”æ¡ˆæ•°ç»„
    hints: string[]; // æç¤ºä¿¡æ¯
    difficulty: 1-5; // å¡«ç©ºéš¾åº¦
  };
  
  difficulty: 1-5; // æ®µè½æ•´ä½“éš¾åº¦
  learningTips: string; // å­¦ä¹ å»ºè®®
  estimatedTime: number; // é¢„è®¡å­¦ä¹ æ—¶é—´(åˆ†é’Ÿ)
  
  metadata: {
    sentenceCount: number;
    avgWordLength: number;
    readingLevel: string; // é˜…è¯»éš¾åº¦ç­‰çº§
  };
}
```

#### 6.2.3 UserProgress ç”¨æˆ·è¿›åº¦è¡¨
```typescript
interface UserProgress {
  id?: number; // è‡ªå¢ä¸»é”®
  paragraphId: string;
  
  masteryLevel: number; // æŒæ¡ç¨‹åº¦ 0-100
  practiceCount: number; // ç»ƒä¹ æ¬¡æ•°
  correctCount: number; // æ­£ç¡®æ¬¡æ•°
  
  lastPracticed: Date;
  nextReview: Date; // ä¸‹æ¬¡å¤ä¹ æ—¶é—´ (é—´éš”é‡å¤)
  
  mistakes: { // é”™è¯¯è®°å½•
    type: 'blank' | 'recitation';
    content: string;
    userAnswer: string;
    correctAnswer: string;
    timestamp: Date;
  }[];
  
  streak: number; // è¿ç»­æ­£ç¡®å¤©æ•°
  totalTimeSpent: number; // æ€»å­¦ä¹ æ—¶é—´(ç§’)
  
  syncStatus: 'local' | 'synced' | 'pending' | 'error';
  lastSync: Date;
}
```

---

## 7. æ¥å£è§„èŒƒ

### 7.1 Edge Functions API

#### 7.1.1 å†…å®¹å¤„ç†æ¥å£
```typescript
POST /api/process-content
{
  "textContent": string,
  "options": {
    "targetDifficulty": 1-5,
    "generateBlanks": boolean,
    "generateSummary": boolean,
    "customPrompts": string[]
  }
}

Response:
{
  "success": boolean,
  "data": {
    "metadata": {
      "totalParagraphs": number,
      "estimatedStudyTime": number,
      "difficultyDistribution": object
    },
    "paragraphs": Paragraph[]
  },
  "error?: string
}
```

#### 7.1.2 è¿›åº¦åŒæ­¥æ¥å£
```typescript
POST /api/sync-progress
{
  "userId": string,
  "deviceId": string,
  "progress": UserProgress[],
  "lastSync": Date
}

Response:
{
  "success": boolean,
  "data": {
    "synced": number,
    "conflicts": object[],
    "serverTimestamp": Date
  }
}
```

### 7.2 æœ¬åœ°å­˜å‚¨API

#### 7.2.1 æ–‡æ¡£æ“ä½œ
```typescript
// æ–‡æ¡£ç®¡ç†
class DocumentService {
  async createDocument(file: File): Promise<Document>
  async getDocument(id: string): Promise<Document | undefined>
  async updateDocument(id: string, updates: Partial<Document>): Promise<void>
  async deleteDocument(id: string): Promise<void>
  async listDocuments(options: ListOptions): Promise<Document[]>
}

// å­¦ä¹ è¿›åº¦
class ProgressService {
  async updateProgress(paragraphId: string, progress: Partial<UserProgress>): Promise<void>
  async getProgress(paragraphId: string): Promise<UserProgress | undefined>
  async getStudyStats(): Promise<StudyStats>
}
```

---

## 8. ç”¨æˆ·ç•Œé¢é‡æ„

### 8.1 é¡µé¢ç»“æ„é‡è®¾è®¡

#### 8.1.1 æ–°é¡µé¢æ¶æ„
```
src/pages/
â”œâ”€â”€ WelcomePage.vue          # æ¬¢è¿ä¸ä»‹ç»
â”œâ”€â”€ DocumentUploadPage.vue   # æ–‡æ¡£ä¸Šä¼ 
â”œâ”€â”€ DocumentListPage.vue     # æ–‡æ¡£ç®¡ç†
â”œâ”€â”€ StudyPage.vue           # å­¦ä¹ ä¸»é¡µé¢
â”œâ”€â”€ TrainingPage.vue        # è®­ç»ƒæ¨¡å¼
â”œâ”€â”€ ReviewPage.vue          # å¤ä¹ æ¨¡å¼
â”œâ”€â”€ SettingsPage.vue        # è®¾ç½®é¡µé¢
â”œâ”€â”€ SyncStatusPage.vue      # åŒæ­¥çŠ¶æ€
â””â”€â”€ HelpPage.vue           # å¸®åŠ©æ–‡æ¡£
```

#### 8.1.2 æ ¸å¿ƒç»„ä»¶æ›´æ–°
```
src/components/
â”œâ”€â”€ upload/
â”‚   â”œâ”€â”€ FileDropZone.vue
â”‚   â”œâ”€â”€ UploadProgress.vue
â”‚   â””â”€â”€ DocumentPreview.vue
â”œâ”€â”€ study/
â”‚   â”œâ”€â”€ ParagraphCard.vue
â”‚   â”œâ”€â”€ FillBlankExercise.vue
â”‚   â”œâ”€â”€ RecitationRecorder.vue
â”‚   â””â”€â”€ ProgressTracker.vue
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ OfflineIndicator.vue
â”‚   â”œâ”€â”€ SyncStatus.vue
â”‚   â””â”€â”€ ThemeToggle.vue
```

### 8.2 å“åº”å¼è®¾è®¡ç³»ç»Ÿ

#### 8.2.1 æ–­ç‚¹ç³»ç»Ÿ
```css
/* Tailwind é…ç½®æ‰©å±• */
screens: {
  'xs': '475px',
  'sm': '640px',
  'md': '768px',
  'lg': '1024px',
  'xl': '1280px',
  '2xl': '1536px',
}
```

#### 8.2.2 æ— éšœç¢è®¾è®¡
- **é”®ç›˜å¯¼èˆª**ï¼šæ‰€æœ‰åŠŸèƒ½æ”¯æŒTabé”®å¯¼èˆª
- **å±å¹•é˜…è¯»å™¨**ï¼šå®Œæ•´ARIAæ ‡ç­¾æ”¯æŒ
- **é«˜å¯¹æ¯”åº¦**ï¼šWCAG 2.1 AAæ ‡å‡†
- **å­—ä½“ç¼©æ”¾**ï¼šæ”¯æŒ200%ç¼©æ”¾ä¸å¤±çœŸ

---

## 9. æµ‹è¯•ç­–ç•¥

### 9.1 æµ‹è¯•é‡‘å­—å¡”

```
            ç«¯åˆ°ç«¯æµ‹è¯• (10%)
                  â”‚
            é›†æˆæµ‹è¯• (30%)
                  â”‚
            å•å…ƒæµ‹è¯• (60%)
```

### 9.2 æµ‹è¯•è¦†ç›–è¦æ±‚

#### 9.2.1 å•å…ƒæµ‹è¯•
- **ä¸šåŠ¡é€»è¾‘**ï¼š90%+ è¦†ç›–ç‡
- **æ•°æ®æ“ä½œ**ï¼š95%+ è¦†ç›–ç‡
- **å·¥å…·å‡½æ•°**ï¼š100% è¦†ç›–ç‡

#### 9.2.2 é›†æˆæµ‹è¯•
- **IndexedDBæ“ä½œ**ï¼šæ‰€æœ‰CRUDæ“ä½œ
- **APIè°ƒç”¨**ï¼šæˆåŠŸ/å¤±è´¥åœºæ™¯
- **åŒæ­¥æœºåˆ¶**ï¼šå†²çªè§£å†³

#### 9.2.3 ç«¯åˆ°ç«¯æµ‹è¯•
- **ç”¨æˆ·æµç¨‹**ï¼šä¸Šä¼ â†’å­¦ä¹ â†’åŒæ­¥å®Œæ•´æµç¨‹
- **ç¦»çº¿åœºæ™¯**ï¼šæ–­ç½‘/å¼±ç½‘ç¯å¢ƒæµ‹è¯•
- **è·¨è®¾å¤‡**ï¼šæ•°æ®ä¸€è‡´æ€§éªŒè¯

### 9.3 æµ‹è¯•å·¥å…·
```json
{
  "unit": "vitest",
  "component": "@vue/test-utils",
  "e2e": "playwright",
  "mock": "msw",
  "coverage": "c8"
}
```

---

## 10. éƒ¨ç½²ä¸è¿ç§»

### 10.1 éƒ¨ç½²ç­–ç•¥

#### 10.1.1 åˆ†é˜¶æ®µéƒ¨ç½²
```mermaid
gantt
    title åˆ†é˜¶æ®µéƒ¨ç½²è®¡åˆ’
    dateFormat  YYYY-MM-DD
    section å‡†å¤‡é˜¶æ®µ
    ç¯å¢ƒæ­å»º        :2025-09-01, 2d
    æµ‹è¯•ç¯å¢ƒéƒ¨ç½²    :2025-09-03, 1d
    
    section æµ‹è¯•é˜¶æ®µ
    å†…éƒ¨æµ‹è¯•        :2025-09-04, 5d
    ç”¨æˆ·æµ‹è¯•        :2025-09-09, 7d
    
    section å‘å¸ƒé˜¶æ®µ
    ç°åº¦å‘å¸ƒ        :2025-09-16, 7d
    å…¨é‡å‘å¸ƒ        :2025-09-23, 1d
```

#### 10.2.2 æ•°æ®è¿ç§»æ–¹æ¡ˆ

##### ç°æœ‰ç”¨æˆ·æ•°æ®è¿ç§»
```typescript
// è¿ç§»ç­–ç•¥
class DataMigration {
  async migrateFromV2(): Promise<MigrationResult> {
    // 1. å¤‡ä»½ç°æœ‰æ•°æ®
    const backup = await this.createBackup();
    
    // 2. è½¬æ¢æ•°æ®ç»“æ„
    const converted = await this.convertData(backup);
    
    // 3. éªŒè¯æ•°æ®å®Œæ•´æ€§
    const validated = await this.validateData(converted);
    
    // 4. å†™å…¥æ–°æ•°æ®åº“
    await this.writeToNewDB(validated);
    
    return { success: true, migratedCount: validated.length };
  }
}
```

##### å›æ»šæœºåˆ¶
- **è‡ªåŠ¨å¤‡ä»½**ï¼šè¿ç§»å‰å®Œæ•´æ•°æ®å¤‡ä»½
- **ç‰ˆæœ¬æ ‡è®°**ï¼šæ•°æ®ç‰ˆæœ¬æ ‡è¯†
- **å¿«é€Ÿå›æ»š**ï¼š5åˆ†é’Ÿå†…æ¢å¤åˆ°åŸç‰ˆæœ¬

---

## 11. é£é™©è¯„ä¼°

### 11.1 æŠ€æœ¯é£é™©

| é£é™©æè¿° | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|----------|------|------|----------|
| **IndexedDBæµè§ˆå™¨å…¼å®¹æ€§** | ä½ | ä¸­ | ç‰¹æ€§æ£€æµ‹+é™çº§æ–¹æ¡ˆ |
| **Gemini APIè°ƒç”¨é™åˆ¶** | ä¸­ | é«˜ | è¯·æ±‚é˜Ÿåˆ—+é‡è¯•æœºåˆ¶ |
| **å¤§æ–‡ä»¶å¤„ç†æ€§èƒ½** | ä¸­ | ä¸­ | åˆ†å—å¤„ç†+Web Workers |
| **æ•°æ®è¿ç§»å¤±è´¥** | ä½ | é«˜ | å®Œæ•´å¤‡ä»½+åˆ†æ‰¹è¿ç§» |
| **åŒæ­¥å†²çª** | ä¸­ | ä¸­ | æ—¶é—´æˆ³+åˆå¹¶ç­–ç•¥ |

### 11.2 ä¸šåŠ¡é£é™©

| é£é™©æè¿° | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|----------|------|------|----------|
| **ç”¨æˆ·ä¸æ¥å—æ–°æ¶æ„** | ä¸­ | é«˜ | æ¸è¿›å¼è¿ç§»+ç”¨æˆ·æ•™è‚² |
| **å­¦ä¹ æˆæœ¬å¢åŠ ** | ä½ | ä¸­ | ç®€åŒ–æ“ä½œ+å¼•å¯¼æ•™ç¨‹ |
| **å†…å®¹è´¨é‡ä¸ç¨³å®š** | ä¸­ | ä¸­ | AIè´¨é‡ç›‘æ§+äººå·¥å®¡æ ¸ |

---

## 12. å¼€å‘è®¡åˆ’

### 12.1 é‡Œç¨‹ç¢‘è§„åˆ’

#### Phase 1: åŸºç¡€è®¾æ–½ (ç¬¬1-2å‘¨)
- [ ] æœ¬åœ°æ•°æ®åº“æ­å»º
- [ ] Edge Functionså¼€å‘
- [ ] æ ¸å¿ƒAPIå®ç°
- [ ] åŸºç¡€æµ‹è¯•æ¡†æ¶

#### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (ç¬¬3-4å‘¨)
- [ ] æ–‡æ¡£ä¸Šä¼ ä¸å¤„ç†
- [ ] å­¦ä¹ æ¨¡å¼é‡æ„
- [ ] è¿›åº¦è·Ÿè¸ªç³»ç»Ÿ
- [ ] ç¦»çº¿åŠŸèƒ½å®ç°

#### Phase 3: ç”¨æˆ·ä½“éªŒ (ç¬¬5-6å‘¨)
- [ ] ç•Œé¢é‡æ„
- [ ] å“åº”å¼è®¾è®¡
- [ ] æ— éšœç¢æ”¯æŒ
- [ ] æ€§èƒ½ä¼˜åŒ–

#### Phase 4: æµ‹è¯•ä¸å‘å¸ƒ (ç¬¬7-8å‘¨)
- [ ] å…¨é¢æµ‹è¯•
- [ ] ç”¨æˆ·æµ‹è¯•
- [ ] æ•°æ®è¿ç§»
- [ ] ç°åº¦å‘å¸ƒ

### 12.2 èµ„æºéœ€æ±‚

#### 12.2.1 äººåŠ›èµ„æº
- **å‰ç«¯å¼€å‘**ï¼š1äºº Ã— 8å‘¨
- **åç«¯å¼€å‘**ï¼š0.5äºº Ã— 4å‘¨ (Edge Functions)
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**ï¼š0.5äºº Ã— 4å‘¨
- **äº§å“ç»ç†**ï¼š0.3äºº Ã— 8å‘¨

#### 12.2.2 æŠ€æœ¯èµ„æº
- **Gemini APIé…é¢**ï¼š1000æ¬¡/å¤©
- **Supabaseæ•°æ®åº“**ï¼š10GBå­˜å‚¨
- **Verceléƒ¨ç½²**ï¼šProè®¡åˆ’
- **æµ‹è¯•è®¾å¤‡**ï¼šæ¡Œé¢/å¹³æ¿/æ‰‹æœºå„2å°

### 12.3 éªŒæ”¶æ ‡å‡†

#### 12.3.1 åŠŸèƒ½éªŒæ”¶
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… ç¦»çº¿æ¨¡å¼100%å¯ç”¨
- âœ… æ•°æ®åŒæ­¥å‡†ç¡®ç‡100%
- âœ… å“åº”æ—¶é—´<50ms

#### 12.3.2 ç”¨æˆ·ä½“éªŒéªŒæ”¶
- âœ… ç”¨æˆ·ä»»åŠ¡å®Œæˆç‡>90%
- âœ… æ–°ç”¨æˆ·å­¦ä¹ æ—¶é—´<5åˆ†é’Ÿ
- âœ… ç”¨æˆ·æ»¡æ„åº¦>4.5/5
- âœ… è·¨è®¾å¤‡ä¸€è‡´æ€§100%

---

## ğŸ“ è”ç³»ä¿¡æ¯

- **é¡¹ç›®è´Ÿè´£äºº**ï¼šFrank
- **æŠ€æœ¯è´Ÿè´£äºº**ï¼šAI Assistant
- **æ–‡æ¡£ç»´æŠ¤**ï¼šGitHubç‰ˆæœ¬æ§åˆ¶
- **åé¦ˆæ¸ é“**ï¼šGitHub Issues

---

**æ–‡æ¡£ä¿®è®¢è®°å½•**
- v1.0 - 2025-08-31 - åˆå§‹ç‰ˆæœ¬
- v1.1 - é¢„è®¡2025-09-07 - æ ¹æ®åé¦ˆè°ƒæ•´

**æ‰¹å‡†ç­¾å­—**
- [ ] æŠ€æœ¯è´Ÿè´£äººå®¡æ ¸
- [ ] äº§å“è´Ÿè´£äººç¡®è®¤
- [ ] é¡¹ç›®ç»ç†æ‰¹å‡†

---

*æœ¬æ–‡æ¡£ä¸ºè®°å¿†å›å“v3.0å‡çº§é¡¹ç›®çš„æƒå¨æŠ€æœ¯è§„èŒƒï¼Œæ‰€æœ‰å¼€å‘å·¥ä½œå¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬æ–‡æ¡£è¦æ±‚ã€‚*